#!/usr/bin/make -f
# -*- makefile -*-
# Sample debian/rules that uses debhelper.
# This file was originally written by Joey Hess and Craig Small.
# As a special exception, when this file is copied by dh-make into a
# dh-make output file, you may use that output file without restriction.
# This special exception was added by Craig Small in version 0.37 of dh-make.

VSN=0.0.2

# Uncomment this to turn on verbose mode.
#export DH_VERBOSE=1

DESTDIR=$(CURDIR)/debian/syslogger

ifneq (,$(findstring debug,$(DEB_BUILD_OPTIONS)))
		DEBUG = yes
else
		DEBUG = no
endif

configure: configure-stamp
configure-stamp:
		dh_testdir
		# Add here commands to configure the package.
		CFLAGS="$(CFLAGS)" ./configure --enable-debug=$(DEBUG)
		touch configure-stamp

build: build-stamp
build-stamp: configure-stamp
		dh_testdir
		# Add here commands to compile the package.
		$(MAKE)
		touch $@

clean: clean-stamp
		dh_testdir
		dh_testroot
		dh_clean
clean-stamp:
		rm -f *-stamp

install: build
		dh_testdir
		dh_testroot
		dh_clean -k
		dh_installdirs -i
		# Add here commands to install the package into debian/testpack.
		$(MAKE) install DESTDIR=$(DESTDIR)


# Build architecture-independent files here.
binary-indep: build install
		dh_testdir -i
		dh_testroot -i
		dh_installchangelogs -i
		dh_installdocs -i
#		dh_installexamples -i
#		dh_install -i
#		dh_installmenu -i
#		dh_installdebconf -i -i
#		dh_installlogrotate
#		dh_installemacsen -i
#		dh_installpam -i
#		dh_installmime -i
#		dh_python -i
#		dh_installinit -i
#		dh_installcron -i
#		dh_installinfo -i
#		dh_installman -i
		dh_link -i
		dh_strip -i
		dh_compress -i
		dh_fixperms -i
#		dh_perl -i
#		dh_makeshlibs -i
		dh_installdeb -i
		dh_shlibdeps -i
		erlang-depends -i
		dh_gencontrol -i
		dh_md5sums -i
		dh_builddeb -i

# Build architecture-dependent files here.
binary-arch: build install

binary: binary-indep binary-arch
.PHONY: build clean binary-indep binary-arch binary install configure
